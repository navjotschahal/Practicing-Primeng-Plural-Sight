<p-toast [style]="{marginTop: '80px'}"></p-toast>

<p-table #tt [value] = 'allTimeSheetData' [columns]='allTimeSheetDataCols' [paginator]="true" [reorderableColumns]="true"
[rows]="4" [rowsPerPageOptions] = '[2, 4, 6, 8, 10]' exportFilename='Users' [(selection)]="selectedRow" (onRowSelect)="onRowSelect($event)"
[scrollable]="false" scrollHeight="400px" appendTo="body"
>

    <ng-template pTemplate="caption">
        <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
        <input type="text" pInputText size="50" placeholder="Search" (input)="tt.filterGlobal($event.target.value, 'contains')" style="width:auto">
    </ng-template>

    <ng-template pTemplate="header" let-devTimeSheetData >

        <tr >
            <th style="width: 3em">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
            </th>
            <th *ngFor="let col of allTimeSheetDataCols" [pSortableColumn]="col" pReorderableColumn>
                {{col.toUpperCase()}}
            </th>
        </tr>

        <tr>
            <th style="width: 3em"></th>
            <th *ngFor="let col of allTimeSheetDataCols" [ngSwitch]="col" pReorderableColumn>
                <!-- <input *ngSwitchCase="col" placeholder="{{col.toUpperCase()}}..." pInputText type="text" (input)="tt.filter($event.target.value, col, 'contains')"> -->
                <!-- <div *ngSwitchCase="col">
                    {{devTimeSheetData[col]}}
                    <i (click)="devTimeSheetData[col]=null;tt.filter(null, col, 'contains')"></i>
                    <p-slider [style]="{'width':'100%','margin-top':'8px'}" [(ngModel)]="devTimeSheetData[col]"></p-slider>
                </div> -->
                
                <p-dropdown *ngSwitchCase="'project'" [options]="allProjects"  [style]="{'width':'100%'}"
                (onChange)="tt.filter($event.value, col, 'equals')"></p-dropdown>
                <!-- <p-multiSelect *ngSwitchCase="col" [options]="col" defaultLabel="col" (onChange)="tt.filter($event.value, col, 'contains')"></p-multiSelect> -->
            </th>
        </tr>

    </ng-template>

    <ng-template pTemplate="body" let-rowData let-devTimeSheetData >
        <tr [pSelectableRow]="rowData">
            <td style="width: 3em">
                <p-tableCheckbox [value]="rowData"></p-tableCheckbox>
            </td>
            <td *ngFor="let col of allTimeSheetDataCols" class="ui-resizable-column" >
                    <p *ngIf='col !== "project"'>{{devTimeSheetData[col]}}</p>
                    <p-cellEditor *ngIf="col === 'project'">
                        <ng-template pTemplate="input">
                            <p-dropdown [options]="allProjects"  [style]="{'width':'100%'}"
                [(ngModel)]='devTimeSheetData[col]'></p-dropdown>
                            <!-- <input type="text" [(ngModel)]="devTimeSheetData[col]"> -->
                        </ng-template>
                        <ng-template pTemplate="output">
                            {{devTimeSheetData[col]}}
                        </ng-template>
                    </p-cellEditor>
                    
            </td>
        </tr>
    </ng-template>

    <ng-template pTemplate="footer">
        <div class="ui-helper-clearfix" style="text-align: left">
            <button type="button" pButton icon="pi pi-file-o" iconPos="left" label="CSV" (click)="tt.exportCSV()" style="margin-right: 0.5em;"></button>
            <button type="button" pButton icon="pi pi-file-excel" iconPos="left" label="EXCEL" (click)="exportExcel()" style="margin-right: 0.5em;" class="ui-button-success"></button>
        </div>
    </ng-template>

</p-table>